<!DOCTYPE html>
<html ng-app="EarwormApp">
  <head>
    <meta charset="utf-8">
    <title>Earworm</title>

    <!-- Main CSS -->
    <link rel="stylesheet" href="./css/main.css">
    <!-- Lobster 2 from Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lobster+Two:400,400i,700,700i" rel="stylesheet">
    <!-- Angular CDNs -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.min.js" charset="utf-8"></script>
    <!-- jQuery CDN -->
    <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
    <!-- Local JS Links -->
    <script src="/js/app.js" charset="utf-8"></script>
    <script src="/js/modals.js" charset="utf-8"></script>
    <base href="/" target="_blank">

  </head>

  <body ng-controller='MainController as ctrl'>

    <div class="container">

      <header ng-include="'partials/header.html'"></header>

      <div class="main_content">

        <!-- New Post Form -->
        <div class="post_menu">
          <form ng-submit="ctrl.processForm()">
            <input type="text" placeholder="Artist" ng-model="ctrl.formData.artist" />
            <input type="text" placeholder="Song Title" ng-model="ctrl.formData.songTitle" />
            <input type="text" placeholder="URL" ng-model="ctrl.formData.url" />
            <input type="text" placeholder="Tag" ng-model="ctrl.formData.tag" />
            <input type="text" ng-model="ctrl.formData.user" value='ObjectId("5a36c94dfce8292cafffb38d")' />
            <input type="submit">
          </form>
        </div>

        <!-- Generate All Posts -->
        <div class="all_posts" ng-repeat="post in ctrl.allPosts">
          <div class="blog_posts">
            <div class="embedded_song">
              {{ post.artist }} - {{ post.songTitle }}
              <p>{{ post.url }}</p>
            </div>

            <!-- Submitted By -->
            <div class="post_content">
              submitted by: {{post.user.username}}<br>
              <!-- Optional Text Box? -->
            </div>

            <!-- Tags -->
            <div class="post_tags" ng-repeat="tag in post.tag">
              <button class="post_tag">#{{tag}}</button>
            </div>

            <!-- Delete Button -->
            <form ng-submit="ctrl.deletePost(post)">
              <input type="submit" value="Delete">
            </form>
          </div>

        </div>

      </div>
    </div>

    <footer class="footer">
      MADE WITH &hearts;
    </footer>

  </body>
</html>
